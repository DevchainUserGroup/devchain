#GethDockerfile
FROM ethereum/client-go:release-1.6
LABEL name=geth

# This is to allow runit stop gracefully
STOPSIGNAL HUP

# configure container
RUN apk add --update bash vim emacs-nox heimdal-telnet shadow runit \
	nodejs git openssl  # for intelligence api
RUN useradd -m eth
RUN passwd -d eth
USER eth
WORKDIR /home/eth
RUN mkdir -p log/geth log/ethnetintel
COPY ./geth*json ./*.sh /home/eth/
RUN bash ./init.sh


USER root
# Add services runit scripts
COPY service /etc/service

EXPOSE 10000 10001 10002
ENTRYPOINT [ "/sbin/runsvdir", "/etc/service" ]
