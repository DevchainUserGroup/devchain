# Copyright 2017 - Dechain User Group
#GethDockerfile
FROM ethereum/client-go:v1.6.5
LABEL name=geth

# This is to allow runit stop gracefully
STOPSIGNAL HUP

ENTRYPOINT [ "/sbin/runsvdir", "/etc/service" ]
RUN ln -s /usr/local/bin/geth /usr/bin/
# configure container
RUN apk add --update bash zsh vim emacs-nox shadow runit less \
	nodejs git openssl  # for intelligence api
RUN useradd -m eth
RUN passwd -d eth

USER eth
WORKDIR /home/eth
RUN mkdir -p log/geth log/ethnetintel
COPY banner.txt /home/eth/.banner-geth.txt
RUN echo "cat ./.banner-geth.txt" > .bashrc
COPY ./geth*json ./*.sh /home/eth/
RUN bash ./init.sh

USER root
RUN chown -R eth:users /home/eth
RUN chmod +x /home/eth/*sh
# Add services runit scripts
COPY service /etc/service

EXPOSE 10000 10001 10002
